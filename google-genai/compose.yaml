# Docker Compose の設定ファイル (compose.yaml または docker-compose.yml)
# 複数のコンテナ（サービス）の設定をまとめて記述します。

# サービス定義の開始
services:
  # サービス名: 任意の名前（ここではアプリ名）
  google-genai-app:
    # ビルド設定: 現在のディレクトリにある Dockerfile を使ってイメージを作ります
    build: .
    
    # ポートマッピング: インターネット/ホストPC <-> コンテナ
    # "8000:8000" は、ホストの8000番ポートへのアクセスをコンテナの8000番ポートに転送することを意味します。
    # これによりブラウザで http://localhost:8000 にアクセスできるようになります。
    ports:
      - "8000:8000"
    
    # ボリュームマウント (ホットリロード設定)
    # ホストのファイルをコンテナと同期させます。
    # ".:/app" は、現在のディレクトリ(.)をコンテナ内の /app にマッピングします。
    # これにより、PCでファイルを編集すると、コンテナ内のファイルも即座に書き換わり、
    # uvicornの --reload 機能が反応してサーバーが再起動します。
    volumes:
      - .:/app
    
    # 環境変数の読み込み
    # .env ファイルに書かれた秘密情報（APIキーなど）をコンテナに読み込ませます。
    env_file:
      - .env
    
    # 実行コマンドのオーバーライド（オプション）
    # DockerfileのCMDを上書きしたい場合に記述しますが、今回はDockerfileの設定で十分なのでコメントアウトしています。
    # command: uvicorn server:app --host 0.0.0.0 --port 8000 --reload
